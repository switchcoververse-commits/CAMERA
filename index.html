<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BRUTAL SCANNER - Precision Engineering</title>
    <style>
        body { margin: 0; background: #000; font-family: 'Inter', -apple-system, sans-serif; color: white; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }
        
        /* Header Técnico */
        .header { height: 10%; background: #000; display: flex; align-items: center; justify-content: center; border-bottom: 2px solid #00d4ff; z-index: 100; }
        .header-text { font-size: 12px; font-weight: 800; letter-spacing: 2px; color: #00d4ff; text-transform: uppercase; }

        /* Visor de Escaneo */
        .viewport { position: relative; width: 100%; height: 70%; display: flex; align-items: center; justify-content: center; background: #050505; }
        video { position: absolute; width: 100%; height: 100%; object-fit: cover; }
        
        /* El Marco de Ingeniería (Ajustado para Multi-Gang) */
        .scanner-frame {
            position: relative;
            width: 70%; height: 60%; 
            border: 2px solid #00d4ff;
            border-radius: 2px;
            box-shadow: 0 0 0 5000px rgba(0, 0, 0, 0.75);
            z-index: 50;
        }
        /* Cruces de precisión en las esquinas */
        .scanner-frame::before { content: ''; position: absolute; top: -10px; left: -10px; width: 20px; height: 20px; border-top: 4px solid #fff; border-left: 4px solid #fff; }
        .scanner-frame::after { content: ''; position: absolute; bottom: -10px; right: -10px; width: 20px; height: 20px; border-bottom: 4px solid #fff; border-right: 4px solid #fff; }

        /* Panel de Control Inferior */
        .footer { height: 20%; background: #000; display: flex; flex-direction: column; align-items: center; justify-content: center; border-top: 1px solid #222; z-index: 100; }
        
        .shutter-group { display: flex; align-items: center; justify-content: center; gap: 30px; width: 100%; }
        
        .shutter-btn { width: 80px; height: 80px; background: #fff; border-radius: 50%; border: 6px solid #00d4ff; cursor: pointer; transition: 0.2s; }
        .shutter-btn:active { transform: scale(0.85); background: #00d4ff; }
        
        .finish-btn { 
            background: #00d4ff; color: #000; border: none; padding: 16px 32px; 
            border-radius: 4px; font-weight: 900; font-size: 14px; display: none;
            text-transform: uppercase; cursor: pointer;
        }

        .status-bar { font-size: 10px; color: #555; margin-bottom: 10px; font-family: monospace; }
        .status-bar.active { color: #00d4ff; }
    </style>
</head>
<body>

    <div class="header">
        <div class="header-text">Universal Device Scanner v1.0</div>
    </div>

    <div class="viewport">
        <video id="video" autoplay playsinline></video>
        <div class="scanner-frame"></div>
    </div>

    <div class="footer">
        <div id="status" class="status-bar">READY TO SCAN...</div>
        <div class="shutter-group">
            <div id="capture" class="shutter-btn"></div>
            <button id="finish" class="finish-btn">Process Order</button>
        </div>
    </div>

    <canvas id="canvas" style="display:none;"></canvas>

    <script>
        const video = document.getElementById('video');
        const canvas = document.getElementById('canvas');
        const captureBtn = document.getElementById('capture');
        const finishBtn = document.getElementById('finish');
        const status = document.getElementById('status');
        
        let sessionPhotos = [];

        // Configuración BRUTAL: Máxima resolución y enfoque manual de proximidad
        const constraints = {
            video: { 
                facingMode: "environment", 
                width: { ideal: 4096 }, 
                height: { ideal: 2160 },
                frameRate: { ideal: 30 }
            } 
        };

        navigator.mediaDevices.getUserMedia(constraints)
            .then(stream => { video.srcObject = stream; })
            .catch(err => alert("Error: Camera high-res mode failed. Check permissions."));
// Sistema de Nivel de Burbuja para fotos perfectas
window.addEventListener("deviceorientation", (event) => {
    const beta = Math.abs(event.beta); // Inclinación adelante/atrás
    const gamma = Math.abs(event.gamma); // Inclinación izquierda/derecha
    
    // Si el móvil está más o menos recto (vertical)
    if (beta > 80 && beta < 100 && gamma < 10) {
        document.querySelector('.scanner-frame').style.borderColor = "#00ff00"; // VERDE: Nivelado
        status.innerText = "LEVEL OK: SCAN NOW";
    } else {
        document.querySelector('.scanner-frame').style.borderColor = "#ff0000"; // ROJO: Inclinado
        status.innerText = "HOLD PHONE VERTICAL & STRAIGHT";
    }
}, true);        captureBtn.addEventListener('click', () => {
            const ctx = canvas.getContext('2d');
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
            
            sessionPhotos.push(canvas.toDataURL('image/jpeg', 1.0)); // Calidad 100%
            
            status.classList.add('active');
            status.innerText = `SCAN CAPTURED: DEVICE ${sessionPhotos.length}`;
            finishBtn.style.display = "block";

            // Efecto de obturador técnico
            document.body.style.backgroundColor = "#fff";
            setTimeout(() => document.body.style.backgroundColor = "#000", 40);
        });

        finishBtn.addEventListener('click', () => {
            // Guardamos localmente para no perderlas
            localStorage.setItem('scannedPhotos', JSON.stringify(sessionPhotos));
            // Redirigimos al formulario de datos y pago
            window.location.href = "https://docs.google.com/forms/d/e/1FAIpQLScbU0wmhZIKDQAuYEoptN-RsS7f2FSGsTVoZqZTCIZu2oVCiA/viewform?usp=preview"; 
        });finishBtn.addEventListener('click', () => {
    // Redirigimos al formulario de datos y pago
    window.location.href = "https://docs.google.com/forms/d/e/1FAIpQLScbU0wmhZIKDQAuYEoptN-RsS7f2FSGsTVoZqZTCIZu2oVCiA/viewform?usp=preview";
});    </script>
</body>
</html>
